<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://likfe.com</id>
    <title>Cafeting • Posts by &#34;androidstudio&#34; tag</title>
    <link href="https://likfe.com" />
    <updated>2019-06-05T11:54:26.000Z</updated>
    <category term="Android" />
    <category term="Flurry" />
    <category term="Confluence" />
    <category term="反编译" />
    <category term="ReactNative" />
    <category term="AccessibilityNodeInfo" />
    <category term="StackOverflow" />
    <category term="Proxy" />
    <category term="AndroidStudio" />
    <category term="Translucent" />
    <category term="SwipeBack" />
    <category term="PopWindow" />
    <category term="AMH" />
    <category term="Flarum" />
    <category term="PHP" />
    <category term="Composer" />
    <category term="ViewPager" />
    <category term="ADB" />
    <category term="Clipboard" />
    <category term="framework" />
    <category term="gradle" />
    <category term="DialogFragment" />
    <category term="PopupWindow" />
    <category term="Google" />
    <category term="Glide" />
    <category term="Intent" />
    <category term="RecyclerView" />
    <category term="Lambda" />
    <category term="Leancloud" />
    <category term="Gradle" />
    <category term="Messenger" />
    <category term="Make" />
    <category term="Mac" />
    <category term="Linux" />
    <category term="JDK" />
    <category term="Fragment" />
    <category term="View" />
    <category term="Scrollbar" />
    <category term="备案" />
    <category term="域名" />
    <category term="Github" />
    <category term="GreenDao" />
    <category term="Rust" />
    <category term="IDEA" />
    <category term="GooglePlay" />
    <category term="Docker" />
    <category term="Jenkins" />
    <category term="MAMP" />
    <category term="树莓派" />
    <category term="Sublime Text" />
    <category term="Emmet" />
    <category term="ThinkPHP" />
    <category term="GitBook" />
    <category term="OSX" />
    <entry>
        <id>https://likfe.com/2019/06/05/SetProxyForAndroidStudio/</id>
        <title>为 Android Studio 或者 Android 项目设置代理</title>
        <link rel="alternate" href="https://likfe.com/2019/06/05/SetProxyForAndroidStudio/"/>
        <content type="html">&lt;p&gt;本文记录给 Android Studio 设置代理，并添加白名单。适用于 Jenkins 等 CI&amp;#x2F;CD 环境。有修改配置文件和命令行2种方式。&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;p&gt;前置环境：一个 HTTP 代理&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Host：xx.xx.xx.xx&lt;/li&gt;
&lt;li&gt;Port：xxxx&lt;/li&gt;
&lt;li&gt;User：userid&lt;/li&gt;
&lt;li&gt;Password：password&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;需要加入白名单的域名：*.nonproxydomains.com&lt;/p&gt;
&lt;h2 id=&#34;配置&#34;&gt;&lt;a href=&#34;#配置&#34; class=&#34;headerlink&#34; title=&#34;配置&#34;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;p&gt;有2种使用方式：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;添加代理配置到当前项目或者全局环境下的 &lt;code&gt;gradle.properties&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;命令行方式&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;方式一：修改gradle-properties&#34;&gt;&lt;a href=&#34;#方式一：修改gradle-properties&#34; class=&#34;headerlink&#34; title=&#34;方式一：修改gradle.properties&#34;&gt;&lt;/a&gt;方式一：修改&lt;code&gt;gradle.properties&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;如果只想修改当前项目，则修改对象是当前项目下的 &lt;code&gt;gradle.properties&lt;/code&gt; 文件&lt;/p&gt;
&lt;p&gt;如果想修改后对所有使用 gradle 构建的项目都起作用，则修改当前用户下 &lt;code&gt;.gradle/gradle.properties&lt;/code&gt; 文件。对于 类Unix系统(Linux、macOs) 是 &lt;code&gt;~/.gradle/&lt;/code&gt; 目录（GRADLE_USER_HOME），Windows 是 系统盘下的 &lt;code&gt;/User/XXX/.gradle/&lt;/code&gt; 目录。&lt;/p&gt;
&lt;p&gt;要添加的内容如下：&lt;/p&gt;
&lt;figure class=&#34;highlight properties&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.http.proxyHost&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;xx.xx.xx.xx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.http.proxyPort&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;xxxx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.http.proxyUser&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;userid&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.http.proxyPassword&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;password&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.http.nonProxyHosts&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;*.nonproxydomains.com|localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.https.proxyHost&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;xx.xx.xx.xx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.https.proxyPort&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;xxxx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.https.proxyUser&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;userid&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.https.proxyPassword&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;password&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;systemProp.https.nonProxyHosts&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;*.nonproxydomains.com|localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;方式二：命令行方式&#34;&gt;&lt;a href=&#34;#方式二：命令行方式&#34; class=&#34;headerlink&#34; title=&#34;方式二：命令行方式&#34;&gt;&lt;/a&gt;方式二：命令行方式&lt;/h3&gt;&lt;p&gt;首先看个 Android 打包的完整命令，然后根据平台差异做一下说明（以macOS下为例）：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cd projectRoot&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;./gradlew :app:assembleDebug -Dhttp.proxyHost=xx.xx.xx.xx -Dhttp.proxyPort=xxxx -Dhttp.nonProxyHosts=*.nonproxydomains.com|localhost -Dhttp.proxyUser=userid -Dhttp.proxyPassword=password -Dhttps.proxyHost=xx.xx.xx.xx -Dhttps.proxyPort=xxxx -Dhttps.nonProxyHosts=*.nonproxydomains.com|localhost -Dhttps.proxyUser=userid -Dhttps.proxyPassword=password&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 换行看下参数，和配置文件的参数对应&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttp.proxyHost=xx.xx.xx.xx&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttp.proxyPort=xxxx&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttp.nonProxyHosts=*.nonproxydomains.com|localhost&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttp.proxyUser=userid&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttp.proxyPassword=password&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttps.proxyHost=xx.xx.xx.xx&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttps.proxyPort=xxxx&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttps.nonProxyHosts=*.nonproxydomains.com|localhost&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttps.proxyUser=userid&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-Dhttps.proxyPassword=password&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;这里特别说下 &lt;code&gt;http.nonProxyHosts=*.nonproxydomains.com|localhost &lt;/code&gt; 中的 &lt;code&gt;|&lt;/code&gt; 符号，命令行使用时可能因为平台差异、字符转义问题需要特殊处理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;当然，如果按照上面的方式没有问题，则不需要特殊处理。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;对于 &lt;code&gt;Unix/Linux&lt;/code&gt; 系统：管道字符 &lt;code&gt;|&lt;/code&gt; 可能需要反斜杠 &lt;code&gt;\&lt;/code&gt; 来转义，使它不被解释为 shell 管道。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;-Dhttp.nonProxyHosts=*.nonproxydomains.com|localhost&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;当上面的使用方式有问题时改为：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-Dhttp.nonProxyHosts=*.nonproxydomains.com\|localhost&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;对于 &lt;code&gt;Windows&lt;/code&gt; 系统： &lt;code&gt;|&lt;/code&gt; 可能需要反斜杠 &lt;code&gt;^&lt;/code&gt; 来转。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;-Dhttp.nonProxyHosts=*.nonproxydomains.com|localhost&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;当上面的使用方式有问题时改为：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-Dhttp.nonProxyHosts=*.nonproxydomains.com^|localhost&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;对于使用字符串（双引号包裹）时，也需要转义处理&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;-Dhttp.nonProxyHosts=*.nonproxydomains|localhost&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;作为字符串处理时&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-Dhttp.nonProxyHosts=&amp;quot;*.nonproxydomains\|localhost&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;blockquote&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.gradle.org/current/userguide/build_environment.html#sec:accessing_the_web_via_a_proxy&#34;&gt;设置 HTTP 代理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://confluence.atlassian.com/jirakb/java-option-http-nonproxyhosts-does-not-work-214863640.html&#34;&gt;nonProxyHosts 无效&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果有什么问题或者意见，可以通过下面的方式和我联系&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;微博：&lt;a href=&#34;http://weibo.com/zyansen&#34;&gt;cafeting&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;Github： &lt;a href=&#34;https://github.com/likfe&#34;&gt;likfe&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;CSDN：&lt;a href=&#34;http://blog.csdn.net/ys743276112&#34;&gt;他叫自己Mr.张&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
</content>
        <category term="Proxy" />
        <category term="AndroidStudio" />
        <updated>2019-06-05T11:54:26.000Z</updated>
    </entry>
    <entry>
        <id>https://likfe.com/2018/10/25/as-err-string-range-1/</id>
        <title>Android Studio Error:String index out of range:-1</title>
        <link rel="alternate" href="https://likfe.com/2018/10/25/as-err-string-range-1/"/>
        <content type="html">&lt;p&gt;博主遇到此问题的原因是 NDK 版本过高（&amp;gt;&amp;#x3D;18），或者说 Android Studio 版本过低（&amp;lt;3.x），导致不匹配造成的。解决方法是降低 NDK 版本到 17.x 及以下，或者升级 Android Studio 版本到 3.x。&lt;/p&gt;
&lt;h2 id=&#34;0x00-异常&#34;&gt;&lt;a href=&#34;#0x00-异常&#34; class=&#34;headerlink&#34; title=&#34;0x00 异常&#34;&gt;&lt;/a&gt;0x00 异常&lt;/h2&gt;&lt;p&gt;最近接手同事的一个项目，在我电脑上使用 Android Studio 死活是无法正常加载，同步项目的过程一直报 &lt;code&gt;String index out of range: -1&lt;/code&gt; 的异常，且没有任何有用的 Log 打印出来。&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;p&gt;基础环境：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;macOS 10.13.6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Android Studio 2.3.3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;JDK 1.8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;使用多个搜索引擎搜索 &lt;code&gt;Android Studio String index out of range: -1&lt;/code&gt; 发现无一例此种情况，大多是 &lt;code&gt;String index out of range: -xx&lt;/code&gt; ，xx 都小于 &lt;code&gt;-1&lt;/code&gt; 。&lt;/p&gt;
&lt;h2 id=&#34;0x01-解决&#34;&gt;&lt;a href=&#34;#0x01-解决&#34; class=&#34;headerlink&#34; title=&#34;0x01 解决&#34;&gt;&lt;/a&gt;0x01 解决&lt;/h2&gt;&lt;p&gt;既然没有已有的解决方案，就只能下笨方法来处理了。我对比了 Android SDK 里面所有的库版本，逐一排除，锁定到 NDK 版本上，没问题的版本都是17及以下的，我的最近升级到 18.x 了，索性直接移除 NDK 试了下，发现项目能正常打开了。&lt;/p&gt;
&lt;p&gt;由于公司项目使用的环境版本比较低，且无法支持高版本的 gradle 环境，遂选择使用降级 NDK 的方案。使用官网下载 NDK 17.x 版本后，项目也是正常运行。&lt;/p&gt;
&lt;h2 id=&#34;0x02-总结&#34;&gt;&lt;a href=&#34;#0x02-总结&#34; class=&#34;headerlink&#34; title=&#34;0x02 总结&#34;&gt;&lt;/a&gt;0x02 总结&lt;/h2&gt;&lt;p&gt;此类情况发生的几率比较小，但日常开发中还是需要多关注下开发环境，避免不必要的麻烦。&lt;/p&gt;
&lt;p&gt;如果有什么建议或者问题可以随时联系我，共同探讨学习：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Github： &lt;a href=&#34;http://likfe.github.io/&#34;&gt;likfe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CSDN：&lt;a href=&#34;http://blog.csdn.net/ys743276112&#34;&gt;他叫自己Mr.张&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;掘金：&lt;a href=&#34;https://juejin.im/user/56042f4b60b2f3a91f58461d&#34;&gt;cafeting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;微博：&lt;a href=&#34;http://weibo.com/zyansen&#34;&gt;cafeting&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
</content>
        <category term="AndroidStudio" />
        <updated>2018-10-25T07:25:57.000Z</updated>
    </entry>
    <entry>
        <id>https://likfe.com/2017/03/15/android-studio-exploded-aar/</id>
        <title>Android 必知必会 - Android Studio 2.3 找回 exploded-aar 目录【官方已更新】</title>
        <link rel="alternate" href="https://likfe.com/2017/03/15/android-studio-exploded-aar/"/>
        <content type="html">&lt;p&gt;今天收到邮件提示 &lt;code&gt;exploded-aar&lt;/code&gt; 目录问题在 &lt;code&gt;gradle plugin 2.5&lt;/code&gt; 版本修复好了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Marked as Fixed&lt;/p&gt;
&lt;p&gt;in 2.3&amp;#x2F;2.4 you can look in the build cache entries and look in the input file that indicate the source of the cache entry (maven coordinate).&lt;br&gt;in 2.5+ we switched to Gradle’s own cache so you’ll have to look in the gradle folder.&lt;br&gt;If all you need is manually get the aar content you could also manually download the aar and unzip it yourself.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;查看 Issue 详情（需要梯子）：&lt;a href=&#34;https://issuetracker.google.com/issues/37127616&#34;&gt;Issue 页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;— 更新于 2017-05-11&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;升级到 Android Studio 2.3 后，Gradle Plugin 也升级到 2.3.0，对应推荐使用的 Gradle 版本是 3.3。&lt;/p&gt;
&lt;p&gt;这时候会发现项目目录下 &lt;code&gt;&amp;#123;module name&amp;#125;/build/intermediates/exploded-aar/&lt;/code&gt; 目录没了，经过一番查找，发现这并不是一个 Bug，是官方刻意为之，它会在 &lt;code&gt;&amp;#123;user name&amp;#125;/.android/build-cache&lt;/code&gt; 下生成一部分缓存文件，来代替 &lt;code&gt;exploded-aar&lt;/code&gt; ，如果需要生成它，可以配置项目目录下的 &lt;code&gt;gradle.properties&lt;/code&gt; ，添加一行内容：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;android.enableBuildCache=false&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;p&gt;然后重建项目即可在 &lt;code&gt;&amp;#123;module name&amp;#125;/build/intermediates/&lt;/code&gt; 看到 &lt;strong&gt;exploded-aar&lt;/strong&gt; 目录了。&lt;/p&gt;
&lt;p&gt;想重新开启 &lt;code&gt;BuildCache&lt;/code&gt;  功能，可以修改为 &lt;code&gt;android.enableBuildCache=true&lt;/code&gt; 或者直接删除本行内容即可。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PS&lt;/strong&gt;：你可以通过下面的方式和我联系&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;微博：&lt;a href=&#34;http://weibo.com/zyansen&#34;&gt;cafeting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Github： &lt;a href=&#34;https://github.com/likfe&#34;&gt;likfe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CSDN：&lt;a href=&#34;http://blog.csdn.net/ys743276112&#34;&gt;他叫自己Mr.张&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
</content>
        <category term="Android" />
        <category term="AndroidStudio" />
        <category term="Gradle" />
        <updated>2017-03-15T10:45:35.000Z</updated>
    </entry>
    <entry>
        <id>https://likfe.com/2017/03/13/android-update-gradle/</id>
        <title>Android Studio 升级 gradle 报错</title>
        <link rel="alternate" href="https://likfe.com/2017/03/13/android-update-gradle/"/>
        <content type="html">&lt;p&gt;错误提示如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;Gradle sync failed: Cause: error in opening zip file&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Consult IDE log for more details (Help | Show Log)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;今天升级 2.2 到 2.3 后打开一个项目提示升级 gradle，就同意了，结果报了上面的错误。&lt;/p&gt;
&lt;p&gt;大概原因应该是下载的最新的 gradle 包有问题，新升级后配置的代理失效了。&lt;/p&gt;
&lt;p&gt;操作如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;删除项目目录下的 &lt;code&gt;.gradle/&lt;/code&gt; 整个项目&lt;/li&gt;
&lt;li&gt;查看 &lt;code&gt;gradle/wrapper/gradle-warpper.properties&lt;/code&gt; 的 &lt;code&gt;distributionUrl&lt;/code&gt; 的 gradle 版本，比如是 3.3 ，然后去 &lt;code&gt;~/.gradle/warpper/dists/&lt;/code&gt; 下删除对应版本的 gradle ,这里是 &lt;code&gt;gradle-3.3-all&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后重启 Android Studio 让它重新同步即可&lt;/li&gt;
&lt;/ol&gt;
</content>
        <category term="Android" />
        <category term="AndroidStudio" />
        <category term="Gradle" />
        <updated>2017-03-13T03:22:25.000Z</updated>
    </entry>

    <follow_challenge>
        <feedId>73986782175755264</feedId>
        <userId>72100854660436992</userId>
    </follow_challenge>
</feed>
